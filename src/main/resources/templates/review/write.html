<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>글쓰기</title>
    <link rel="stylesheet" href="/css/default.css">
    <link rel="stylesheet" href="/css/header.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="/js/index.js"></script>
    <script th:inline="javascript">
    
    function previewImage(event) {
    	  var input = event.target;
    	  var reader = new FileReader();
    	  reader.onload = function(){
    	    var img = document.createElement("img");
    	    img.onload = function() {
    	      var container = document.getElementById("image-preview-container");
    	      var containerWidth = container.clientWidth;
    	      var containerHeight = container.clientHeight;
    	      var imageWidth = img.width;
    	      var imageHeight = img.height;

    	      if (imageWidth > containerWidth) {
    	        imageHeight *= containerWidth / imageWidth;
    	        imageWidth = containerWidth;
    	      }

    	      if (imageHeight > containerHeight) {
    	        imageWidth *= containerHeight / imageHeight;
    	        imageHeight = containerHeight;
    	      }

    	      container.innerHTML = '';
    	      container.appendChild(img);
    	      img.style.width = imageWidth + 'px';
    	      img.style.height = imageHeight + 'px';
    	    };
    	    img.src = reader.result;
    	  };
    	  reader.readAsDataURL(input.files[0]);
    	}
    	</script>

<style>
#image-preview-container {

  border: none; /* 테두리 제거 */

  margin-top: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100px;
  height: 100px;
}
</style>
    
    
</head>
<body>
<div th:replace ="fragments/header :: header">
  	</div>
<div id="container">
  <h1>[ 게시판 - 글쓰기 ]</h1>
  <p>
  <form action="write" method="post" enctype="multipart/form-data" th:object="${writeForm}">
    <table>
      <tr>
        <th>제목</th>
        <td>
          <input type="text" th:field="*{title}">
          <div class="error" th:errors="*{title}"></div>
        </td>
      </tr>
      <tr>
        <th>내용</th>
        <td>
          <textarea rows="10" cols="30" th:field="*{contents}"></textarea>
          <div class="error" th:errors="*{contents}"></div>
        </td>
      </tr>
      <tr>
        <th>첨부파일1</th>
        <td>
  			<input id="file1" type="file" name="file" accept="image/*" onchange="previewImage(event)">
 			 <div id="image-preview-container"></div> 
  	  </td>
        
      </tr>
      <tr>
        <th>첨부파일2</th>
        <td>
          <input type="file" name="file2">
        </td>
        
      </tr>
      
    </table>
    <p>
    <div class="center">
      <input type="button" onclick="location.href='/review/list'" value="목록으로">
      <input type="submit" value="등록하기">
      <input type="reset" value="취소">
    </div>
  </form>
</div>
</body>
</html>